{"version":3,"sources":["../../../../server/api/room/room.model.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;;;;AAEb,IAAI,QAAQ,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC,YAAY,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC;;AAErE,IAAI,aAAa,GAAG,IAAI,QAAQ,CAAC,MAAM,CAAC;AACtC,MAAI,EAAE;AACF,QAAI,EAAC,IAAI;AACT,eAAQ,IAAI,CAAC,GAAG;GACnB;AACD,MAAI,EAAC,MAAM;AACX,MAAI,EAAC,MAAM;AACX,UAAQ,EAAC,EAAC,IAAI,EAAC,OAAO,EAAC,WAAQ,KAAK,EAAC;AACrC,QAAM,EAAC,QAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,QAAQ;AACrC,QAAM,EAAC,QAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,QAAQ;CACtC,CAAC,CAAC;;AAEH,IAAI,UAAU,GAAG,IAAI,QAAQ,CAAC,MAAM,CAAC;AACnC,UAAQ,EAAE,CAAC,aAAa,CAAC;AACzB,MAAI,EAAC,MAAM;AACX,OAAK,EAAC,QAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,QAAQ;AACpC,SAAO,EAAE,CAAC,EAAC,IAAI,EAAC,QAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,QAAQ,EAAE,GAAG,EAAC,MAAM,EAAC,CAAC;AAC5D,MAAI,EAAC,MAAM;AACX,iBAAe,EAAC,EAAC,IAAI,EAAC,IAAI,EAAC,WAAQ,IAAI,CAAC,GAAG,EAAE,EAAC;AAC9C,KAAG,EAAC,MAAM;CACX,EAAE;AACD,UAAQ,EAAE;AACR,YAAQ,EAAE,IAAI;GACf;AACD,QAAM,EAAE;AACN,YAAQ,EAAE,IAAI;GACf;CACF,CAAC,CAAC;;AAEH,UAAU,CAAC,OAAO,CAAC,oBAAoB,CAAC,CAAC,GAAG,CAAC,YAAW;AACtD,SAAO,IAAI,CAAC,eAAe,CAAC,OAAO,EAAE,CAAC;CACvC,CAAC,CAAC;;qBAGY,QAAQ,CAAC,KAAK,CAAC,MAAM,EAAE,UAAU,CAAC;AAC1C,IAAI,OAAO,GAAC,QAAQ,CAAC,KAAK,CAAC,SAAS,EAAG,aAAa,CAAC,CAAC","file":"room.model.js","sourcesContent":["'use strict';\n\nvar mongoose = require('bluebird').promisifyAll(require('mongoose'));\n\nvar MessageSchema = new mongoose.Schema({\n  date: {\n      type:Date,\n      default:Date.now\n  },\n  name:String,\n  text:String,\n  scribble:{type:Boolean,default:false},\n  roomId:mongoose.Schema.Types.ObjectId,\n  origin:mongoose.Schema.Types.ObjectId\n});\n\nvar RoomSchema = new mongoose.Schema({\n  messages: [MessageSchema],\n  name:String,\n  admin:mongoose.Schema.Types.ObjectId,\n  members: [{type:mongoose.Schema.Types.ObjectId, ref:'User'}],\n  kind:String,\n  lastMessageDate:{type:Date,default:Date.now()},\n  img:String\n}, {\n  toObject: {\n    virtuals: true\n  },\n  toJSON: {\n    virtuals: true\n  }\n});\n\nRoomSchema.virtual('lastMessageDate_ms').get(function() {\n  return this.lastMessageDate.getTime();\n});\n\n\nexport default mongoose.model('Room', RoomSchema);\nexport var Message=mongoose.model('Message',  MessageSchema);\n"]}