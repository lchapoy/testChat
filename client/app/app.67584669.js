"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _toConsumableArray(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function _toConsumableArray(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function MessageService(a){var b={},c=20,d=function(d){b[d]||(b[d]={},b[d].messages=[],b[d].page=0,b[d].end=!1,a.getMessage({id:d,page:b[d].page,messageXpage:c}).then(function(a){var e;a.reverse(),a.length<c&&(b[d].end=!0),(e=b[d].messages).push.apply(e,_toConsumableArray(a))}))},e={newMessage:function(a,c){b[a]&&b[a].messages.push(c)},getMessages:function(a){return d(a),b[a].messages},getNextPackage:function(d){return!b[d].end&&(b[d].page++,a.getMessage({id:d,page:b[d].page,messageXpage:c}).then(function(a){var e;a.length<c&&(b[d].end=!0),a.reverse(),(e=b[d].messages).unshift.apply(e,_toConsumableArray(a))}),!0)}};return e}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}MessageService.$inject=["Comm"],angular.module("chatYeoApp",["chatYeoApp.auth","chatYeoApp.admin","chatYeoApp.constants","ngCookies","ngResource","ngSanitize","btford.socket-io","ui.router","validation.match","ngMaterial","ngMessages","ngAnimate","ngMdIcons"]).config(["$urlRouterProvider","$locationProvider","$mdThemingProvider",function(a,b,c){a.otherwise("/"),b.html5Mode(!0),c.theme("default").primaryPalette("orange").warnPalette("indigo").accentPalette("blue").foregroundPalette[3]="gainsboro"}]),angular.module("chatYeoApp.admin",["chatYeoApp.auth","ui.router"]),angular.module("chatYeoApp.auth",["chatYeoApp.constants","chatYeoApp.util","ngCookies","ui.router"]).config(["$httpProvider",function(a){a.interceptors.push("authInterceptor")}]),angular.module("chatYeoApp.util",[]),function(){function a(a,b,c,d,e,f,g){var h=f.safeCb,i={},j=e.userRoles||[];console.log(c.get("token")),c.get("token")&&"/logout"!==a.path()&&(i=g.get(),i.$promise.then(function(){console.log(c.get("token"))}));var k={login:function(a,e){return b.post("/auth/local",{email:a.email,password:a.password}).then(function(a){return c.put("token",a.data.token),i=g.get(),i.$promise}).then(function(a){return h(e)(null,a),a})["catch"](function(a){return k.logout(),h(e)(a.data),d.reject(a.data)})},logout:function(){c.remove("token"),i={}},createUser:function(a,b){return g.save(a,function(d){return c.put("token",d.token),i=g.get(),h(b)(null,a)},function(a){return k.logout(),h(b)(a)}).$promise},changePassword:function(a,b,c){return g.changePassword({id:i._id},{oldPassword:a,newPassword:b},function(){return h(c)(null)},function(a){return h(c)(a)}).$promise},getCurrentUser:function(a){if(0===arguments.length)return i;var b=i.hasOwnProperty("$promise")?i.$promise:i;return d.when(b).then(function(b){return h(a)(b),b},function(){return h(a)({}),{}})},isLoggedIn:function(a){return 0===arguments.length?i.hasOwnProperty("role"):k.getCurrentUser(null).then(function(b){var c=b.hasOwnProperty("role");return h(a)(c),c})},hasRole:function l(a,b){var l=function(a,b){return j.indexOf(a)>=j.indexOf(b)};return arguments.length<2?l(i.role,a):k.getCurrentUser(null).then(function(c){var d=!!c.hasOwnProperty("role")&&l(c.role,a);return h(b)(d),d})},isAdmin:function(){return k.hasRole.apply(k,[].concat.apply(["admin"],arguments))},getToken:function(){return c.get("token")}};return k}a.$inject=["$location","$http","$cookies","$q","appConfig","Util","User"],angular.module("chatYeoApp.auth").factory("Auth",a)}();var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();!function(){var a=function(){function a(b){_classCallCheck(this,a),this.users=b.query()}return a.$inject=["User"],_createClass(a,[{key:"delete",value:function(a){a.$remove(),this.users.splice(this.users.indexOf(a),1)}}]),a}();angular.module("chatYeoApp.admin").controller("AdminController",a)}(),angular.module("chatYeoApp").config(["$stateProvider",function(a){a.state("login",{url:"/login",templateUrl:"app/account/login/login.html",controller:"LoginController",controllerAs:"vm"}).state("logout",{url:"/logout?referrer?force",referrer:"main",template:"",controller:["$state","Auth","socket","$timeout","$mdDialog",function(a,b,c,d,e){var f=a.params.referrer||a.current.referrer||"main",g=a.params.force;if(g){var h=e.confirm().title("Multiple Account Login").textContent("Your account is being used on another machine").ariaLabel("alert").targetEvent().ok("Ok");e.show(h).then(function(){},function(){})}c.disconnect(),b.logout(),d(function(){a.go(f)},1)}]}).state("signup",{url:"/signup",templateUrl:"app/account/signup/signup.html",controller:"SignupController",controllerAs:"vm"}).state("settings",{url:"/settings",templateUrl:"app/account/settings/settings.html",controller:"SettingsController",controllerAs:"vm",authenticate:!0})}]).run(["$rootScope",function(a){a.$on("$stateChangeStart",function(a,b,c,d){"logout"===b.name&&d&&d.name&&!d.authenticate&&(b.referrer=d.name)})}]),angular.module("chatYeoApp.admin").config(["$stateProvider",function(a){a.state("admin",{url:"/admin",templateUrl:"app/admin/admin.html",controller:"AdminController",controllerAs:"admin",authenticate:"admin"})}]),function(a,b){a.module("chatYeoApp.constants",[]).constant("appConfig",{userRoles:["guest","user","admin"]})}(angular);var AddGroupCtrl=function a(b,c,d,e,f){_classCallCheck(this,a),this.errors={},this.arrId=[],this.newGroup=function(){var a=this;0==this.added.length?this.errors.other="You should add a friend":""==this.groupName||void 0==this.groupName?this.errors.other="You should add a name":(this.errors.other="",this.Comm.createGroup({groupName:this.groupName,membersId:this.added,img:"/assets/images/group_no_image.c74ca2f4.png"}).then(function(b){a.Chat.newGroup(b),a.groupName="",a.closeAddGroup()}))},this.addMemberId=function(a){this.arrId.push(a)},this.removeMemberId=function(a){var b=this.arrId.indexOf(a);this.added.splice(b,1)},this.showDialog=function(a){var b=this;this.$mdDialog.show({parent:angular.element(document.body),targetEvent:a,templateUrl:"components/addUsersToGroup/addUsersToGroup.html",locals:{group:this.selection},controller:"AddUsersToGroupCtrl",controllerAs:"u2gCtrl"}).then(function(a){b.added=a,console.log(b.added)})},this.Comm=c,this.scope=b,this.Chat=d,this.rooms=d.getRooms(),this.added=[],this.groupName="",this.toggleAddGroup=e.triggerToggle("addGroup"),this.closeAddGroup=e.triggerClose("addGroup"),this.$mdDialog=f};AddGroupCtrl.$inject=["$scope","Comm","Chat","sideNavToggler","$mdDialog"],angular.module("chatYeoApp").controller("AddGroupCtrl",AddGroupCtrl),angular.module("chatYeoApp").config(["$stateProvider",function(a){a.state("addGroup",{url:"/addGroup",templateUrl:"app/chat/addGroup/addGroup.html",controller:"AddGroupCtrl"})}]);var AddUserCtrl=function b(a,c){_classCallCheck(this,b),this.errors={},this.answer={},this.newContact=function(a){var b=this;this.Comm.createRoom({email:a}).then(function(c){b.errors.other="",b.answer.other="request was sent to "+a,b.Chat.newRequest(c)})["catch"](function(a){b.errors.other=a.data.message})},this.acceptFriend=function(a){var b=this;this.Comm.acceptFriend({friendId:a}).then(function(a){b.Chat.newFriend(a)})["catch"](function(a){b.errors.other=a.data.message})},this.rejectFriend=function(a){var b=this;this.Comm.rejectFriend({friendId:a}).then(function(){b.Chat.rejectRequest(a)})["catch"](function(a){b.errors.other=a.data.message})},this.Comm=a,this.Chat=c,this.requests=c.getRequests(),this.pendings=c.getPendings()};AddUserCtrl.$inject=["Comm","Chat"],angular.module("chatYeoApp").controller("AddUserCtrl",AddUserCtrl),angular.module("chatYeoApp").config(["$stateProvider",function(a){a.state("addUser",{url:"/addUser",templateUrl:"app/chat/addUser/addUser.html",controller:"AddUserCtrl"})}]);var ChatCtrl=function c(a,b){_classCallCheck(this,c),a.reset(),b.buildToggler("addContact"),b.buildToggler("addGroup"),b.buildToggler("contacts"),b.buildToggler("information")};ChatCtrl.$inject=["Chat","sideNavToggler"],angular.module("chatYeoApp").controller("ChatCtrl",ChatCtrl),angular.module("chatYeoApp").config(["$stateProvider",function(a){a.state("chat",{url:"/chat",authenticate:!0,views:{"":{templateUrl:"app/chat/chat.html",controller:"ChatCtrl"},"contacts@chat":{templateUrl:"app/chat/contacts/contacts.html",controller:"ContactsCtrl",controllerAs:"CCtrl"},"messages@chat":{templateUrl:"app/chat/messages/messages.html",controller:"MessagesCtrl",controllerAs:"MessCtrl"},"information@chat":{templateUrl:"app/chat/information/information.html",controller:"InformationCtrl",controllerAs:"ICtrl"},"addContact@chat":{templateUrl:"app/chat/addUser/addUser.html",controller:"AddUserCtrl",controllerAs:"ac"},"addGroup@chat":{templateUrl:"app/chat/addGroup/addGroup.html",controller:"AddGroupCtrl",controllerAs:"GCtrl"},"pending@chat":{templateUrl:"app/chat/pendings/pendings.html",controller:"PendingCtrl",controllerAs:"vm"},"request@chat":{templateUrl:"app/chat/request/request.html",controller:"RequestCtrl",controllerAs:"vm"}}})}]);var ContactsCtrl=function d(a,b){_classCallCheck(this,d),this.rooms=a.getRooms(),this.groups=a.getGroups(),this.toggleContacts=b.triggerToggle("contacts"),this.toggleAddContact=b.triggerToggle("addContact"),this.toggleAddGroup=b.triggerToggle("addGroup"),this.selectUser=function(b,c){a.changeSelection(b,c),this.toggleContacts()},this.openAddFriends=function(){this.toggleAddContact(),this.toggleContacts()},this.openAddGroups=function(){this.toggleAddGroup(),this.toggleContacts()}};ContactsCtrl.$inject=["Chat","sideNavToggler"],angular.module("chatYeoApp").controller("ContactsCtrl",ContactsCtrl),angular.module("chatYeoApp").config(["$stateProvider",function(a){a.state("contacts",{url:"/contacts",templateUrl:"app/chat/contacts/contacts.html",controller:"ContactsCtrl"})}]);var InformationCtrl=function e(a,b,c,d,f){var g=this;_classCallCheck(this,e),this.deleteFriendFromGroup=function(a,b){g.Chat.deleteFriendFromGroup({roomId:g.roomId,friendId:a,groupName:b})},this.deleteGroup=function(){g.Chat.deleteGroup({roomId:g.roomId}),g.toggleInfo()},this.exitGroup=function(a){g.selection.admin!=g.user._id?g.Chat.exitGroup({roomId:g.roomId,groupName:a,newAdmin:g.selection.admin}):g.Chat.exitGroup({roomId:g.roomId,groupName:a,newAdmin:g.selection.members[0]._id}),g.toggleInfo()},this.deleteFriend=function(){g.Chat.deleteFriend({id:g.roomId,friendId:g.selection._id}),g.toggleInfo()},this.user=a.getUser(),this.roomId="NoID",this.selection=null,this.Chat=a,this.toggleInfo=f.triggerToggle("information");var h=function(){var b=a.getSelection();b?(g.roomId=b._id,"par"==b.kind?g.selection=b.members[0]:g.selection=b):g.selection=null};b.subscribe(c,h),this.showDialog=function(a){d.show({parent:angular.element(document.body),targetEvent:a,templateUrl:"components/addUsersToGroup/addUsersToGroup.html",locals:{group:this.selection},controller:"AddUsersToGroupCtrl",controllerAs:"u2gCtrl"})},this.showConfirm=function(a,b,c,e){console.log(a,b);var f=d.confirm().title(a).textContent("Are you sure?").ariaLabel("alert").targetEvent().ok("Ok").cancel("Cancel");d.show(f).then(function(){b(c,e)},function(){})}};InformationCtrl.$inject=["Chat","EventNotify","$scope","$mdDialog","sideNavToggler"],angular.module("chatYeoApp").controller("InformationCtrl",InformationCtrl),angular.module("chatYeoApp").config(["$stateProvider",function(a){a.state("information",{url:"/information",templateUrl:"app/chat/information/information.html",controller:"InformationCtrl"})}]);var MessagesCtrl=function f(a,b,c,d,e,g,h,i){var j=this;_classCallCheck(this,f),this.sendCanvas=function(a){j.socket.messageToRoom(j.roomId,{name:j.currentUser.name,text:a,origin:j.currentUser._id,scribble:!0},j.kind),j.Messages.newMessage(j.roomId,{name:j.currentUser.name,text:a,origin:j.currentUser._id,scribble:!0}),j.Comm.storeMessage({id:j.currentUser._id},{name:j.currentUser.name,text:a,roomId:j.roomId,scribble:!0})},this.addMessage=function(){""!=j.sendText&&(j.socket.messageToRoom(j.roomId,{name:j.currentUser.name,text:j.sendText,origin:j.currentUser._id},j.kind),j.Messages.newMessage(j.roomId,{name:j.currentUser.name,text:j.sendText,origin:j.currentUser._id}),j.Comm.storeMessage({id:j.currentUser._id},{name:j.currentUser.name,text:j.sendText,roomId:j.roomId}),j.sendText="")},this.selectionNull=function(){j.selection=null},this.Comm=a,this.Chat=b,this.Messages=c,this.socket=d,this.selection=null,this.messages=[],this.sendText="",this.currentUser=b.getUser(),this.requests=b.getRequests(),this.membersNames="",this.toggleContacts=h.triggerToggle("contacts"),this.toggleInfo=h.triggerToggle("information"),this.roomId=null,this.kind=null,this.isLoggedIn=i.isLoggedIn,this.isAdmin=i.isAdmin,this.currentUser=i.getCurrentUser(),d.socket().on("newMessage",function(a){c.newMessage(a.roomId,a.message),b.newMessage(a.roomId,j.roomId,a.kind)});var k=function(){var a=b.getSelection();a?(j.roomId=a._id,"par"==a.kind?(j.kind="par",j.selection=a.members[0],j.membersNames=""):(j.kind="group",j.selection=a,angular.forEach(j.selection.members,function(a,b){0==b?j.membersNames=a.name:j.membersNames+=", "+a.name})),j.roomId&&(j.messages=c.getMessages(j.roomId))):j.selection=null};e.subscribe(g,k)};MessagesCtrl.$inject=["Comm","Chat","Messages","socket","EventNotify","$scope","sideNavToggler","Auth"],angular.module("chatYeoApp").controller("MessagesCtrl",MessagesCtrl),angular.module("chatYeoApp").config(["$stateProvider",function(a){a.state("messages",{url:"/messages",templateUrl:"app/chat/messages/messages.html",controller:"MessagesCtrl"})}]);var PendingController=function g(a,b){_classCallCheck(this,g),this.errors={},this.answer={},this.Comm=a,this.Chat=b,this.pendings=b.getPendings()};PendingController.$inject=["Comm","Chat"],angular.module("chatYeoApp").controller("PendingCtrl",PendingController);var RequestController=function h(a,b){_classCallCheck(this,h),this.errors={},this.answer={},this.acceptFriend=function(a){var b=this;this.Comm.acceptFriend({friendId:a}).then(function(a){b.Chat.newFriend(a)})["catch"](function(a){b.errors.other=a.data.message})},this.rejectFriend=function(a){var b=this;this.Comm.rejectFriend({friendId:a}).then(function(){b.Chat.rejectRequest(a)})["catch"](function(a){b.errors.other=a.data.message})},this.Comm=b,this.Chat=a,this.requests=a.getRequests()};RequestController.$inject=["Chat","Comm"],angular.module("chatYeoApp").controller("RequestCtrl",RequestController),function(){var a=function b(a,c,d){_classCallCheck(this,b),this.$http=a,this.awesomeThings=[],c.isLoggedIn(function(){d.go("chat")})};a.$inject=["$http","Auth","$state"],angular.module("chatYeoApp").controller("MainController",a)}(),angular.module("chatYeoApp").config(["$stateProvider",function(a){a.state("main",{url:"/",templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"main"})}]);var AddUsersToGroupCtrl=function i(a,b,c,d){var e=this;_classCallCheck(this,i),this.filterSelected=!0,this.createFilterFor=function(a){var b=angular.lowercase(a);return function(a){return a._lowername.indexOf(b)!=-1||a.email.indexOf(b)!=-1}},this.querySearch=function(a){var b=a?e.allContacts.filter(e.createFilterFor(a)):[];return b},this.closeDialog=function(){this.$mdDialog.cancel()},this.rooms=c.getRooms(),this.contacts=[],this.allContacts=[],this.$mdDialog=b,this.Chat=c;var f={};d&&angular.forEach(d.members,function(a){f[a._id]=!0}),angular.forEach(this.rooms,function(a){var b=a.members[0];b._lowername=b.name.toLowerCase(),f[b._id]||e.allContacts.push(b)}),this.addFriendToGroup=function(){var a=[];angular.forEach(e.contacts,function(b){a.push(b._id)}),d?a.length>0&&(c.addFriendToGroup({roomId:d._id,membersId:a,groupName:d.name}),b.hide()):b.hide(e.contacts)}};AddUsersToGroupCtrl.$inject=["$scope","$mdDialog","Chat","group"],angular.module("chatYeoApp").controller("AddUsersToGroupCtrl",AddUsersToGroupCtrl);var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),SettingsController=function(){function a(b,c){_classCallCheck(this,a),this.errors={},this.submitted=!1,this.Auth=b,this.$state=c}return a.$inject=["Auth","$state"],_createClass(a,[{key:"changePassword",value:function(a){var b=this;this.submitted=!0,a.$valid&&this.Auth.changePassword(this.user.oldPassword,this.user.newPassword).then(function(){b.message="Password successfully changed."})["catch"](function(){a.password.$setValidity("mongoose",!1),b.errors.other="Incorrect password",b.message=""})}},{key:"cancel",value:function(){this.$state.go("chat")}}]),a}();angular.module("chatYeoApp").controller("SettingsController",SettingsController);var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),LoginController=function(){function a(b,c,d,e,f,g){_classCallCheck(this,a),this.user={},this.errors={},this.submitted=!1,this.Auth=b,this.$state=c,this.User=d,this.$window=e,this.$location=f,this.$cookies=g}return a.$inject=["Auth","$state","User","$window","$location","$cookies"],_createClass(a,[{key:"login",value:function(a){var b=this;this.submitted=!0,this.$cookies.get("token")?(this.$location.path("/main"),this.$window.location.reload()):a.$valid&&this.Auth.login({email:this.user.email,password:this.user.password}).then(function(){b.$state.go("chat")})["catch"](function(a){b.errors.other=a.message})}}]),a}();angular.module("chatYeoApp").controller("LoginController",LoginController),function(){function a(a,b,c,d,e){var f;return{request:function(a){return a.headers=a.headers||{},c.get("token")&&e.isSameOrigin(a.url)&&(a.headers.Authorization="Bearer "+c.get("token")),a},responseError:function(a){return 401===a.status&&((f||(f=d.get("$state"))).go("login"),c.remove("token")),b.reject(a)}}}a.$inject=["$rootScope","$q","$cookies","$injector","Util"],angular.module("chatYeoApp.auth").factory("authInterceptor",a)}(),function(){angular.module("chatYeoApp.auth").run(["$rootScope","$state","Auth",function(a,b,c){a.$on("$stateChangeStart",function(a,d){d.authenticate&&("string"==typeof d.authenticate?c.hasRole(d.authenticate,_.noop).then(function(d){if(!d)return a.preventDefault(),c.isLoggedIn(_.noop).then(function(a){b.go(a?"main":"login")})}):c.isLoggedIn(_.noop).then(function(c){c||(a.preventDefault(),b.go("main"))}))})}])}(),function(){function a(a){return a("/api/users/:id/:controller",{id:"@_id"},{changePassword:{method:"PUT",params:{controller:"password"}},get:{method:"GET",params:{id:"me"}},getFriends:{method:"GET",params:{controller:"getAllFriends"},isArray:!0},addFriend:{method:"PUT",params:{controller:"addMail"}},addContactRoom:{method:"PUT",params:{controller:"addContRoom"}},addGroup:{method:"PUT",params:{controller:"addGroup"}}})}a.$inject=["$resource"],angular.module("chatYeoApp.auth").factory("User",a)}(),angular.module("chatYeoApp").directive("canvasDrawing",["$window","$timeout",function(a,b){return{restrict:"EA",scope:{sendCanvas:"&"},templateUrl:"components/canvasDrawing/canvasDrawing.html",link:function(a,c,d){function e(){console.log(j[0].width),console.log(j[0].offsetWidth),console.log(j[0].clientWidth),h.attr("width",j[0].clientWidth-50)}function f(){i.clearRect(0,0,h[0].width,h[0].height)}function g(b,c,d,e){i.lineTo(d,e),i.lineWidth=l,i.strokeStyle=a.color,i.stroke()}console.log(c.children().children()[0]);var h=angular.element(c.children().children()[0]),i=h[0].getContext("2d"),j=h.parent().parent().parent(),k={20:2,40:5,60:10},l=2;a.color="#FFF",a.options=["#FF8A80","#FFD180","#FFFF8D","#CFD8DC","#80D8FF","#A7FFEB","#CCFF90"],a.getWindowWidth=function(){return j[0].offsetWidth},a.$watch(a.getWindowWidth,function(a,c){f(),b(function(){e()},100)}),a.colorChanged=function(b,c){a.color=b,console.log("from ",c," to ",b)},a.changeWidth=function(a){l=k[a]},a.send=function(){a.sendCanvas()(h[0].toDataURL()),f()},a.clear=function(){f()},e();var m,n,o=!1;h.bind("mousedown",function(a){m=a.offsetX,n=a.offsetY,i.beginPath(),i.moveTo(m,n),o=!0}),h.bind("mousemove",function(a){if(o){var b=a.offsetX,c=a.offsetY;g(m,n,b,c)}}),h.bind("mouseup",function(a){o=!1}),h[0].addEventListener("touchstart",function(a){m=a.offsetX,n=a.offsetY,i.beginPath(),i.moveTo(m,n),o=!0}),h[0].addEventListener("touchmove",function(a){if(o){var b=a.offsetX,c=a.offsetY;g(m,n,b,c)}}),h[0].addEventListener("touchend",function(a){o=!1})}}}]),function(){function a(a,b,c,d){function e(a,b){var c=0;return angular.forEach(a,function(a,d){if(a._id==b)return c=d,!0}),a[c]}function f(){return B}function g(a,b){a?(B=b,b.newMessage=!1):B=null,d.notify()}function h(){return y}function i(){return z}function j(){return A}function k(){return x}function l(){return C}function m(a){A.push(a),d.notify()}function n(a){angular.forEach(y,function(b,c){if(b._id==a)return z.splice(c,1),!0}),d.notify()}function o(a){y.push(a),angular.forEach(z,function(b,c){if(b._id==a.members[0]._id)return z.splice(c,1),!0}),d.notify()}function p(a){x.push(a),g("group",e(x,a._id))}function q(a){b.deleteRoom(a).then(function(){angular.forEach(y,function(b,c){if(b._id==a.id)return y.splice(c,1),!0}),g(null,null)})}function r(a){b.deleteFriendFromGroup(a).then(function(){})}function s(a){b.addFriendToGroup(a).then(function(){})}function t(a){b.deleteGroup(a).then(function(){})}function u(a){b.exitGroup(a).then(function(){b.getRooms({id:C._id,kind:"group"}).then(function(a){x.length=0,x.push.apply(x,_toConsumableArray(a[0].rooms)),g(null,null)})})}function v(a,b,c){var d;d="par"==c?y:x,angular.forEach(d,function(c,e){if(a===c._id)return d[e].lastMessageDate_ms=Date.now(),a!=b&&(d[e].newMessage=!0),!0})}function w(){x.length=0,y.length=0,z.length=0,A.length=0,C=c.getCurrentUser(),B=null,a.socket(),c.getCurrentUser(function(){b.getRooms({id:C._id,kind:"par"}).then(function(a){y.push.apply(y,_toConsumableArray(a[0].rooms))}),b.getRooms({id:C._id,kind:"group"}).then(function(a){x.push.apply(x,_toConsumableArray(a[0].rooms))}),b.getRequestPendings({id:C._id}).then(function(a){A.push.apply(A,_toConsumableArray(a.pendings)),z.push.apply(z,_toConsumableArray(a.requests))})}),a.listener("room:newRequest",function(a){z.push(a)}),a.listener("room:tellFriendAccepted",function(a){y.push(a),A.splice(A.indexOf(a.members[0]._id),1)}),a.listener("room:newGroup",function(){b.getRooms({id:C._id,kind:"group"}).then(function(a){x.length=0,x.push.apply(x,_toConsumableArray(a[0].rooms))})}),a.listener("room:deleteFriend",function(a){angular.forEach(y,function(b,c){if(b._id==a)return y.splice(c,1),!0})}),a.listener("room:tellFriendRemoved",function(a){b.getRooms({id:C._id,kind:"group"}).then(function(b){x.length=0,x.push.apply(x,_toConsumableArray(b[0].rooms)),a.roomId==B._id&&(C._id==a.friendId?g(null,null):g("group",e(x,B._id)))})}),a.listener("room:tellFriendExit",function(a){b.getRooms({id:C._id,kind:"group"}).then(function(b){x.length=0,x.push.apply(x,_toConsumableArray(b[0].rooms)),a.roomId==B._id&&g("group",e(x,B._id))})}),a.listener("room:tellGroupDeleted",function(a){b.getRooms({id:C._id,kind:"group"}).then(function(b){x.length=0,console.log(b),x.push.apply(x,_toConsumableArray(b[0].rooms)),a===B._id&&g(null,null)})}),a.listener("room:tellGroupAddedFriend",function(a){b.getRooms({id:C._id,kind:"group"}).then(function(b){x.length=0,console.log(b),x.push.apply(x,_toConsumableArray(b[0].rooms)),a===B._id&&g("group",e(x,B._id))})}),a.listener("room:changeStatus",function(a){angular.forEach(y,function(b){if(b._id==a)return b.members[0].status="Online",!0})}),a.listener("userDisconnect",function(a){angular.forEach(y,function(b){if(console.log(b._id,y),b._id==a)return b.members[0].status="Offline",!0})})}var x=[],y=[],z=[],A=[],B=null,C=c.getCurrentUser(),D={newFriend:o,newGroup:p,newRequest:m,rejectRequest:n,deleteFriend:q,newMessage:v,getSelection:f,getRooms:h,getGroups:k,getRequests:i,getPendings:j,changeSelection:g,getUser:l,reset:w,deleteGroup:t,addFriendToGroup:s,deleteFriendFromGroup:r,exitGroup:u};return D}a.$inject=["socket","Comm","Auth","EventNotify"],angular.module("chatYeoApp").factory("Chat",a)}(),angular.module("chatYeoApp").directive("colorPicker",function(){return{templateUrl:"components/colorPicker/colorPicker.html",restrict:"E",scope:{color:"=",options:"=",onColorChanged:"&"},replace:!0,link:function(a,b,c){a.clickVar=!1,a.changeColor=function(b){if(a.clickVar=!1,a.color!=b){var c=a.color;a.color=b,a.onColorChanged({newColor:b,oldColor:c})}},a.showPalette=function(){a.clickVar=!0}}}}),function(){function a(a){var b={createRoom:function(b){return a.save(b,function(a){return a},function(a){return a}).$promise},createGroup:function(b){return a.createGroup(b,function(a){return a},function(a){return a}).$promise},deleteRoom:function(b){return a["delete"](b,function(a){return a},function(a){return a}).$promise},deleteFriendFromGroup:function(b){return a.deleteFriendFromGroup(b,function(a){return a},function(a){return a}).$promise},addFriendToGroup:function(b){return a.addFriendToGroup(b,function(a){return a},function(a){return a}).$promise},deleteGroup:function(b){return a.deleteGroup(b,function(a){return a},function(a){return a}).$promise},exitGroup:function(b){return a.exitGroup(b,function(a){return a},function(a){return a}).$promise},getRooms:function(b){return a.getRooms(b,function(a){return a},function(a){return a}).$promise},storeMessage:function(b,c){return a.storeMessage(b,c,function(a){return a},function(a){return a}).$promise},getMessage:function(b){return a.getMessage(b,function(a){return a},function(a){return a}).$promise},acceptFriend:function(b){return a.acceptFriend(b,function(a){return a},function(a){return a}).$promise},rejectFriend:function(b){return a.rejectFriend(b,function(a){return a},function(a){return a}).$promise},getRequestPendings:function(b){return a.getRequestPendings(b,function(a){return a},function(a){return a}).$promise}};return b}a.$inject=["Room"],angular.module("chatYeoApp").factory("Comm",a)}(),function(){function a(a){return a("/api/rooms/:id/:controller",{id:"@_id"},{getRooms:{method:"GET",params:{controller:"getRooms"},isArray:!0},getRequestPendings:{method:"GET",params:{controller:"getRequestPendings"}},createGroup:{method:"POST",params:{controller:"createGroup"}},storeMessage:{method:"PUT",params:{controller:"storeMessage"},isArray:!0},getMessage:{method:"GET",params:{controller:"getMessage"},isArray:!0},deleteFriendFromGroup:{method:"POST",params:{controller:"deleteFriendFromGroup"}},addFriendToGroup:{method:"POST",params:{controller:"addFriendToGroup"}},deleteGroup:{method:"POST",params:{controller:"deleteGroup"}},exitGroup:{method:"POST",params:{controller:"exitGroup"}},acceptFriend:{method:"POST",params:{controller:"acceptFriend"}},rejectFriend:{method:"POST",params:{controller:"rejectFriend"}}})}a.$inject=["$resource"],angular.module("chatYeoApp").factory("Room",a)}(),angular.module("chatYeoApp").directive("dashboard",["sideNavToggler",function(a){return{templateUrl:"components/dashboard/dashboard.html",restrict:"EA",scope:{},replace:!0,link:function(b,c,d){b.openContact=a.triggerToggle("contacts")}}}]),angular.module("chatYeoApp").factory("EventNotify",["$rootScope",function(a){return{subscribe:function(b,c){var d=a.$on("event-notify",c);b.$on("$destroy",d)},notify:function(){a.$emit("event-notify")}}}]),angular.module("chatYeoApp").directive("footer",function(){return{templateUrl:"components/footer/footer.html",restrict:"E",link:function(a,b){b.addClass("footer")}}}),angular.module("chatYeoApp").directive("ctxDraw",function(){return{scope:{ctxDraw:"="},restrict:"A",link:function(a,b,c){var d=b[0],e=d.getContext("2d"),f=a.ctxDraw;e.drawImage(f,0,0)}}}),angular.module("chatYeoApp").controller("LoadDrawingCtrl",["$scope","imageObj",function(a,b){a.imageObj=b}]),angular.module("chatYeoApp").directive("loadDrawing",["$mdDialog",function(a){return{restrict:"A",link:function(b,c,d){var e=c[0];e.onclick=function(){b.showCanvas()},b.showCanvas=function(){a.show({clickOutsideToClose:!0,parent:angular.element(document.body),templateUrl:"components/loadDrawing/loadDrawing.html",controller:"LoadDrawingCtrl",locals:{imageObj:e}})}}}}]),angular.module("chatYeoApp").factory("Messages",MessageService),angular.module("chatYeoApp").directive("mongooseError",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){b.on("keydown",function(){return d.$setValidity("mongoose",!0)})}}});var NavbarController=function j(a){_classCallCheck(this,j),this.menu=[{title:"Home",state:"main"}],this.isCollapsed=!0,this.isLoggedIn=a.isLoggedIn,this.isAdmin=a.isAdmin,this.currentUser=a.getCurrentUser()};NavbarController.$inject=["Auth"],angular.module("chatYeoApp").controller("NavbarController",NavbarController),angular.module("chatYeoApp").directive("navbar",function(){return{templateUrl:"components/navbar/navbar.html",restrict:"E",controller:"NavbarController",controllerAs:"nav",link:function(a,b,c,d){}}}),angular.module("chatYeoApp").controller("OauthButtonsCtrl",["$window",function(a){this.loginOauth=function(b){a.location.href="/auth/"+b}}]),angular.module("chatYeoApp").directive("oauthButtons",function(){return{templateUrl:"components/oauth-buttons/oauth-buttons.html",restrict:"EA",controller:"OauthButtonsCtrl",controllerAs:"OauthButtons",scope:{classes:"@"}}}),angular.module("chatYeoApp").directive("repeatMessages",["$timeout",function(a){return{templateUrl:"components/repeatMessages/repeatMessages.html",restrict:"EA",scope:{messages:"=messages",userId:"=userId",group:"=group",scrollFn:"&"},replace:!0,link:function(b,c,d){var e=c[0],f=b.messages.length;b.fromOrTo=function(a){return a==b.userId?"me":"from"},b.$watch("messages.length",function(){var c=e.scrollHeight-e.scrollTop-363;c<100?a(function(){e.scrollTop=e.scrollHeight,console.log(e.scrollHeight,e.scrollTop)},1):b.messages.length-f>=5&&a(function(){e.scrollTop=e.scrollHeight-c+580,console.log(e.scrollHeight,e.scrollTop)},1),f=b.messages.length})}}}]),angular.module("chatYeoApp").directive("scrollTop",["$timeout",function(a){
return{restrict:"A",link:function(a,b,c){b.bind("scroll load",function(){b[0].scrollHeight-b[0].scrollTop;b[0].scrollTop<100&&a.scrollFn()})}}}]);var sideNavToggler=function k(a){var b=this;_classCallCheck(this,k),this.triggerToggle=function(a){return b.togglers[a]},this.triggerClose=function(a){return function(){b.$mdSidenav(a).close()}},this.togglers={},this.$mdSidenav=a,this.buildToggler=function(c){return b.togglers[c]=function(){a(c).toggle()}}};sideNavToggler.$inject=["$mdSidenav"],angular.module("chatYeoApp").service("sideNavToggler",sideNavToggler),console.log(io),angular.module("chatYeoApp").factory("socket",["socketFactory","Auth","$mdToast","$state",function(a,b,c,d){function e(a){c.show(c.simple().textContent(a).position("right bottom").hideDelay(3e3))}var f,g,h=(b.getCurrentUser(),!0),i=function(){return h&&(console.log("hi"),f=io("",{query:"token="+b.getToken(),"force new connection":!0,path:"/socket.io-client"}),g=a({ioSocket:f}),h=!1),g.on("forceDisconnect",function(){g.disconnect(),h=!0,d.go("logout",{force:!0})}),g};return g=i(),{socket:i,syncUpdates:function(a,b,c){c=c||angular.noop,g.on(a+":save",function(a){var d=_.find(b,{_id:a._id}),e=b.indexOf(d),f="created";d?(b.splice(e,1,a),f="updated"):b.push(a),c(f,a,b)}),g.on(a+":remove",function(a){var d="deleted";_.remove(b,{_id:a._id}),c(d,a,b)})},unsyncUpdates:function(a){g.removeAllListeners(a+":save"),g.removeAllListeners(a+":remove")},emitter:function(a,b){g.emit(a,b)},listener:function(a,b){b=b||angular.noop,g.on(a,function(a,c){console.log(c),e(c),b(a)})},joinRooms:function(){g.emit("room:joinRooms")},addRoom:function(a){g.emit("room:addRoom",a)},removeRoom:function(a){g.emit("room:removeRoom",a)},messageToRoom:function(a,b,c){g.emit("room:newMessage",{roomId:a,message:b,kind:c})},disconnect:function(){g.emit("forceDisconnect"),g.disconnect(),h=!0}}}]);var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),SignupController=function(){function a(b,c){_classCallCheck(this,a),this.user={},this.errors={},this.submitted=!1,this.Auth=b,this.$state=c}return a.$inject=["Auth","$state"],_createClass(a,[{key:"register",value:function(a){var b=this;this.submitted=!0,a.$valid&&this.Auth.createUser({name:this.user.name,email:this.user.email,password:this.user.password}).then(function(){b.$state.go("chat")})["catch"](function(c){c=c.data,b.errors={},angular.forEach(c.errors,function(c,d){a[d].$setValidity("mongoose",!1),b.errors[d]=c.message})})}}]),a}();angular.module("chatYeoApp").controller("SignupController",SignupController),function(){function a(a){var b={safeCb:function(a){return angular.isFunction(a)?a:angular.noop},urlParse:function(a){var b=document.createElement("a");return b.href=a,b},isSameOrigin:function(c,d){return c=b.urlParse(c),d=d&&[].concat(d)||[],d=d.map(b.urlParse),d.push(a.location),d=d.filter(function(a){return c.hostname===a.hostname&&c.port===a.port&&c.protocol===a.protocol}),d.length>=1}};return b}a.$inject=["$window"],angular.module("chatYeoApp.util").factory("Util",a)}(),angular.module("chatYeoApp").run(["$templateCache",function(a){a.put("app/account/login/login.html",'<div layout=row flex layout-align=center><div flex-gt-xs=50 flex-gt-md=30 flex=70 layout=column layout-align=center><md-content md-whiteframe=10><md-toolbar layout=row layout-padding layout-align="center center"><span class="md-toolbar-item md-headline">Login</span></md-toolbar><form name=form layout=column layout-padding=3px ng-submit=vm.login(form)><md-input-container layout=row class=md-icon-float><md-icon class=md-dark aria-label=username>person</md-icon><input flex=90 type=email name=email ng-model=vm.user.email placeholder=Email required><div ng-messages=form.email.$error><div ng-message=required>Please enter a valid e-mail.</div><div ng-message=mongoose>{{vm.errors.password}}</div></div></md-input-container><md-input-container layout=row class=md-icon-float><md-icon class=md-dark arial-label=password>lock</md-icon><input flex=90 type=password name=password ng-model=vm.user.password placeholder=Password required><div ng-messages=form.password.$error><div ng-message=required>Password is required</div></div></md-input-container><p class=help-block>{{ vm.errors.other }}</p><div class=md-actions layout=row layout-align=center><md-button aria-label=Cancel ui-sref=main>Cancel</md-button><md-button class=md-primary aria-label=Login type=submit>Login</md-button></div></form></md-content><!--<div class="form-module">--><!--<div class="toggle">--><!--<a class="btn btn-default btn-lg btn-toggler" ui-sref="main">--><!--<ng-md-icon icon="clear"></ng-md-icon>--><!--</a>--><!--<oauth-buttons classes="btn-block"></oauth-buttons>--><!--<a class="btn btn-default btn-lg btn-toggler " ui-sref="signup">--><!--<ng-md-icon icon="person_add"></ng-md-icon>--><!--</a>--><!--<div class="tooltip" >Sign up</div>--><!--</div>--><!--<form name="form" ng-submit="vm.login(form)">--><!--<h2>Login</h2>--><!--<md-input-container class="md-block" flex-gt-sm="">--><!--<label>Email</label>--><!--<input type="email" name="email" class="form-control" ng-model="vm.user.email"--><!--required >--><!--<div ng-messages="form.email.$error">--><!--<div ng-message="required">--><!--Please enter a valid e-mail.--><!--</div>--><!--<div ng-message="mongoose">--><!--{{vm.errors.password}}--><!--</div>--><!--</div>--><!--</md-input-container>--><!--<md-input-container class="md-block" flex-gt-sm="">--><!--<label>Password</label>--><!--<input type="password" name="password" class="form-control" ng-model="vm.user.password"--><!--required/>--><!--<div ng-messages="form.password.$error">--><!--<div ng-message="required">--><!--Password is required--><!--</div>--><!--</div>--><!--</md-input-container>--><!--<p class="help-block">{{ vm.errors.other }}</p>--><!--<div>--><!--<button class="btn btn-inverse btn-lg btn-register" type="submit">--><!--Login--><!--</button>--><!--</div>--><!--<hr/>--><!--</form>--><!--</div>--></div></div>'),a.put("app/account/settings/settings.html",'<navbar></navbar><div layout=row flex layout-align=center><div flex-gt-xs=50 flex-gt-md=30 flex=70 layout=column layout-align=center><md-content md-whiteframe=10><md-toolbar layout=row layout-padding layout-align="center center"><span class="md-toolbar-item md-headline">Settings</span></md-toolbar><form name=form layout=column layout-padding=3px ng-submit=vm.login(form)><md-input-container layout=row class=md-icon-float><md-icon class=md-dark aria-label=username>lock</md-icon><input type=password name=password class=form-control ng-model=vm.user.oldPassword placeholder="Current Password" mongoose-error><p class=help-block ng-show=form.password.$error.mongoose>{{ vm.errors.other }}</p></md-input-container><md-input-container layout=row class=md-icon-float><md-icon class=md-dark aria-label=username>vpn_key</md-icon><input type=password name=newPassword class=form-control ng-model=vm.user.newPassword ng-minlength=8 placeholder="New Password" required><p class=help-block ng-show="(form.newPassword.$error.minlength || form.newPassword.$error.required) && (form.newPassword.$dirty || vm.submitted)">Password must be at least 8 characters.</p></md-input-container><md-input-container layout=row><md-icon class=md-dark aria-label=username>vpn_key</md-icon><input type=password name=confirmPassword class=form-control ng-model=vm.user.confirmPassword match=vm.user.newPassword placeholder="Confirm New Password" ng-minlength=8 required><p class=help-block ng-show="form.confirmPassword.$error.match && vm.submitted">Passwords must match.</p></md-input-container><p class=help-block>{{ vm.message }}</p><div class=md-actions layout=row layout-align=center><md-button aria-label=Cancel ng-click=vm.cancel()>Back</md-button><md-button class=md-primary aria-label=Login type=submit>Save</md-button></div><!--<button class="btn btn-lg btn-primary btn-green" type="submit">Save changes</button>--><!--<button class="btn btn-lg btn-primary " ng-click="vm.cancel()">Cancel changes</button>--><!--<md-input-container layout="row" class="md-icon-float">--><!--<md-icon class="md-dark" aria-label="username">person</md-icon>--><!--<input flex="90" type="email" name="email" ng-model="vm.user.email" placeholder="Email" required>--><!--<div ng-messages="form.email.$error">--><!--<div ng-message="required">--><!--Please enter a valid e-mail.--><!--</div>--><!--<div ng-message="mongoose">--><!--{{vm.errors.password}}--><!--</div>--><!--</div>--><!--</md-input-container>--><!--<md-input-container  layout="row" class="md-icon-float">--><!--<md-icon class="md-dark" arial-label="password">lock</md-icon>--><!--<input flex="90" type="password" name="password" ng-model="vm.user.password" placeholder="Password" required>--><!--<div ng-messages="form.password.$error">--><!--<div ng-message="required">--><!--Password is required--><!--</div>--><!--</div>--><!--</md-input-container>--><!--<p class="help-block">{{ vm.errors.other }}</p>--><!--<div class="md-actions" layout="row" layout-align="center" >--><!--<md-button aria-label="Cancel"  ui-sref="main">Cancel</md-button>--><!--<md-button class="md-primary" aria-label="Login" type="submit">Login</md-button>--><!--</div>--></form></md-content></div></div><!--<div class="form-module">--><!--<form  name="form" ng-submit="vm.changePassword(form)" novalidate>--><!--<md-input-container class="md-block" flex-gt-sm="">--><!--<label>Current Password</label>--><!--<input type="password" name="password" class="form-control" ng-model="vm.user.oldPassword"--><!--mongoose-error/>--><!--<p class="help-block" ng-show="form.password.$error.mongoose">--><!--{{ vm.errors.other }}--><!--</p>--><!--</md-input-container>--><!--<md-input-container class="md-block" flex-gt-sm="">--><!--<label>New Password</label>--><!--<input type="password" name="newPassword" class="form-control" ng-model="vm.user.newPassword"--><!--ng-minlength="3"--><!--required/>--><!--<p class="help-block"--><!--ng-show="(form.newPassword.$error.minlength || form.newPassword.$error.required) && (form.newPassword.$dirty || vm.submitted)">--><!--Password must be at least 3 characters.--><!--</p>--><!--</md-input-container>--><!--<md-input-container class="md-block" flex-gt-sm="">--><!--<label>Confirm New Password</label>--><!--<input type="password" name="confirmPassword" class="form-control" ng-model="vm.user.confirmPassword"--><!--match="vm.user.newPassword"--><!--ng-minlength="3"--><!--required=""/>--><!--<p class="help-block"--><!--ng-show="form.confirmPassword.$error.match && vm.submitted">--><!--Passwords must match.--><!--</p>--><!--</md-input-container>--><!--<p class="help-block"> {{ vm.message }} </p>--><!--<button class="btn btn-lg btn-primary btn-green" type="submit">Save changes</button>--><!--<button class="btn btn-lg btn-primary " ng-click="vm.cancel()">Cancel changes</button>--><!--</form>--><!--</div>--><!--</div>-->'),a.put("app/account/signup/signup.html",'<div layout=row flex layout-align=center><div flex-gt-xs=50 flex-gt-md=30 flex=70 layout=column layout-align=center><md-content md-whiteframe=10><md-toolbar layout=row layout-padding layout-align="center center"><span class="md-toolbar-item md-headline">Sign up</span></md-toolbar><form name=form layout-padding=3px ng-submit=vm.register(form) layout=column><md-input-container layout=row><!--<label>Name</label>--><md-icon class=md-dark aria-label=name>person</md-icon><input flex=90 name=name class=form-control ng-model=vm.user.name required placeholder="Name"><div ng-messages=form.name.$error><div ng-message=required>Name is required.</div></div></md-input-container><md-input-container layout=row><label>Email</label><md-icon class=md-dark aria-label=mail>mail</md-icon><input flex=90 type=email name=email ng-model=vm.user.email required minlength=10 maxlength=100 ng-pattern="/^.+@.+\\..+$/" mongoose-error><div ng-messages=form.email.$error><div ng-message-exp="[\'required\', \'minlength\', \'maxlength\', \'pattern\']">Your email must be between 10 and 100 characters long and look like an e-mail address.</div><div ng-message=mongoose>{{vm.errors.password}}</div></div></md-input-container><md-input-container layout=row><label>Password</label><md-icon class=md-dark aria-label=password>vpn_key</md-icon><input type=password name=password class=form-control ng-model=vm.user.password ng-minlength=8 required mongoose-error><div ng-messages=form.password.$error><div ng-message=required>Password is required</div><div ng-message=minlength>Password must be at least 8 characters</div><div ng-message=mongoose>{{vm.errors.password}}</div></div></md-input-container><md-input-container layout=row><label>Confirm Password</label><md-icon class=md-dark aria-label=password>vpn_key</md-icon><input type=password name=confirmPassword class=form-control ng-model=vm.user.confirmPassword match=vm.user.password ng-minlength=8 required><div ng-messages=form.confirmPassword.$error><div ng-message=required>Password is required</div><div ng-message=minlength>Password must be at least 8 characters</div><div ng-message=match>Passwords must match.</div></div></md-input-container><div class=md-actions layout=row layout-align=center><md-button aria-label=Cancel ui-sref=main>Cancel</md-button><md-button class=md-primary aria-label="sign up" type=submit>Sign up</md-button></div></form></md-content></div></div>'),a.put("app/admin/admin.html",'<navbar></navbar><div class=container><p>The delete user and user index api routes are restricted to users with the \'admin\' role.</p><ul class="list-group user-list"><li class=list-group-item ng-repeat="user in admin.users"><div class=user-info><strong>{{user.name}}</strong><br><span class=text-muted>{{user.email}}</span></div><a ng-click=admin.delete(user) class=trash><span class="fa fa-trash fa-2x"></span></a></li></ul></div>'),a.put("app/chat/addGroup/addGroup.html",'<form ng-submit=GCtrl.newGroup(groupName) layout=column><md-input-container><label for=groupName>Group Name</label><input id=groupName class=search-input ng-model=GCtrl.groupName><p class=help-block>{{ ac.errors.other }}</p></md-input-container><div layout=row layout-align=end><md-button class=md-primary ng-click=GCtrl.showDialog() ng-if="GCtrl.selection.admin==ICtrl.user._id">Add Friends</md-button><md-button type=submit>Create</md-button></div></form><div flex><!--<md-list>--><!--<md-list-item ng-repeat="person in GCtrl.added" >--><!--<img alt="{{ person.name }}" ng-src="{{ person.img }}" class="md-avatar" />--><!--<p>{{person.name}}</p>--><!--<ng-md-icon icon="info_outline" aria-label="info"  ng-class="">--><!--<md-tooltip>--><!--{{person.email}}--><!--</md-tooltip>--><!--</ng-md-icon>--><!--<label>--><!--<ng-md-icon icon="close" class="help-block" aria-label="Going to Add"  ng-class=""></ng-md-icon>--><!--<input type="checkbox" ng-model="person.members[0].add" ng-show="false" ng-change="GCtrl.removeMemberId(person._id)">--><!--</label>--><!--</md-list-item>--><!--</md-list>--><md-card ng-repeat="member in GCtrl.added"><md-card-header><md-card-avatar><img class=md-user-avatar alt="{{ member.name }}" ng-src={{member.img}}></md-card-avatar><md-card-header-text><span class=md-title>{{member.name}}</span> <span class=md-subhead>{{member.email}}</span> <span class=md-subhead>{{member.status}}</span></md-card-header-text></md-card-header><md-card-actions layout=row layout-align="end center"><md-button ng-click=GCtrl.removeMemberId(member._id)>Delete</md-button></md-card-actions></md-card></div><!--<h4 class="title-bar" >Not being added</h4>--><!--<md-content flex>--><!--<md-list>--><!--<md-list-item ng-repeat="person in GCtrl.rooms| filter:searchText" ng-if="!person.members[0].add">--><!--<img alt="{{ person.members[0].name }}" ng-src="{{ person.members[0].img }}" class="md-avatar" />--><!--<p>{{person.members[0].name}}</p>--><!--<ng-md-icon icon="info_outline" aria-label="info"  ng-class="">--><!--<md-tooltip>--><!--{{person.members[0].email}}--><!--</md-tooltip>--><!--</ng-md-icon>--><!--<label>--><!--<ng-md-icon icon="done"class="answer-block" aria-label="Going to Skip"  ng-class=""></ng-md-icon>--><!--<input type="checkbox" ng-model="person.members[0].add" ng-show="false" ng-change="GCtrl.addMemberId(person.members[0]._id)">--><!--</label>--><!--<br>--><!--</md-list-item>--><!--</md-list>--><!--</md-content>--><!--<md-divider></md-divider>--><!--<md-input-container  >--><!--<label for="searchInput">Search</label>--><!--<input  id="searchInput" type="search"  ng-model="searchText">--><!--</md-input-container  >-->'),a.put("app/chat/addUser/addUser.html",'<md-content flex layout=column><form ng-submit=ac.newContact(addEmail) layout=column><md-input-container flex><label>Email:</label><input type=search ng-model=addEmail><p class=help-block>{{ ac.errors.other }}</p><p class=answer-block ng-if=!ac.errors.other>{{ ac.answer.other }}</p></md-input-container><div layout-align=end layout=row><md-button type=submit>Send</md-button></div></form></md-content><!--<md-content>--><!--<h4 class="title-bar">Pending Requests</h4>--><!--<md-list>--><!--<md-list-item ng-repeat="person in ac.requests">--><!--<img alt="{{person.name }}" ng-src="{{ person.img }}" class="md-avatar" />--><!--<p>{{person.name}}</p>--><!--<ng-md-icon class="answer-block" icon="done" ng-click="ac.acceptFriend(person._id)" aria-label="Accept Friend"  ng-class=""></ng-md-icon>--><!--<ng-md-icon class="help-block" icon="close" ng-click="ac.rejectFriend(person._id)" aria-label="Reject Friend"  ng-class=""></ng-md-icon>--><!--</md-list-item>--><!--<md-list-item ng-repeat="person in ac.pendings">--><!--<img alt="{{person.name }}" ng-src="{{ person.img }}" class="md-avatar" />--><!--<p>{{person.name}}</p>--><!--<ng-md-icon icon="query_builder" aria-label="Accept Friend"  ng-class=""></ng-md-icon>--><!--</md-list-item>--><!--</md-list>--><!--</md-content>-->'),a.put("app/chat/chat.html",'<!--<navbar></navbar>--><md-content flex layout=row id=chatViewPort><md-sidenav layout=column class="md-sidenav-left md-whiteframe-z2" md-component-id=contacts md-is-locked-open="$mdMedia(\'gt-xs\')" ui-view=contacts></md-sidenav><!--<md-sidenav layout="column" class="md-sidenav-left md-whiteframe-z2" md-component-id="addContact" ui-view="addContact">--><!--</md-sidenav>--><!--<md-sidenav layout="column" class="md-sidenav-left md-whiteframe-z2" md-component-id="addGroup" ui-view="addGroup">--><!--</md-sidenav>--><md-content flex layout=column class=md-whiteframe-z2 ui-view=messages></md-content><md-sidenav layout=column class="md-sidenav-right md-whiteframe-z2" md-component-id=information md-is-locked-open="$mdMedia(\'gt-sm\')" ui-view=information></md-sidenav></md-content>'),a.put("app/chat/contacts/contacts.html",'<md-toolbar md-whiteframe=2 layout=row layout-align="center center"><span layout-margin=3px></span> <span flex>Friend List</span><!--<ng-md-icon icon="person_add" aria-label="Add User"  class="floater-right" ng-click="CCtrl.openAddFriends()"></ng-md-icon>--><!--<span layout-margin="3px"></span>--></md-toolbar><md-content flex layout=column><div flex layout=column layout-align="center center" ng-if=!CCtrl.rooms.length>You don\'t have any friends yet</div><md-list flex style=height:1px ng-if=CCtrl.rooms.length><md-list-item ng-repeat="room in CCtrl.rooms | orderBy:\'lastMessageDate_ms\':true" ng-click="CCtrl.selectUser(\'par\',room)" ng-class="{\'user-offline\':room.members[0].status==\'Offline\',\'user-online\':room.members[0].status==\'Online\'}"><div layout=row flex><img alt="{{room.members[0].name }}" ng-src="{{room.members[0].img }}" class="md-avatar"><p flex>{{room.members[0].name}}</p><md-icon ng-class="{\'md-primary\':!room.newMessage,\'md-accent\':room.newMessage}">messenger</md-icon></div><md-divider></md-divider></md-list-item><md-divider></md-divider></md-list></md-content><md-toolbar md-whiteframe=2 layout=row layout-align="center center"><span layout-margin=3px></span> <span flex>Group List</span><!--<h4 class="title-bar">Group List--><!--<ng-md-icon icon="group_add" aria-label="Add User"  class="floater-right" ng-click="CCtrl.openAddGroups()">--><!--</ng-md-icon>--> <span layout-margin=3px></span></md-toolbar><!--</h4>--><md-content flex layout=column><div flex layout=column layout-align="center center" ng-if=!CCtrl.groups.length>You don\'t have any Groups yet</div><md-list flex style=height:1px ng-if=CCtrl.groups.length><md-list-item ng-repeat="group in CCtrl.groups | orderBy:\'lastMessageDate_ms\':true" ng-click="CCtrl.selectUser(\'group\',group)"><img alt="{{group.name }}" ng-src="{{ group.img }}" class="md-avatar"><p>{{group.name}}</p><!--<ng-md-icon icon="messenger"  aria-label="Open Chat"  ng-class="{\'md-primary\':!group.newMessage,\'md-alert\':group.newMessage}"></ng-md-icon>--><md-icon ng-class="{\'md-primary\':!group.newMessage,\'md-accent\':group.newMessage}">messenger</md-icon><md-divider></md-divider></md-list-item><md-divider></md-divider></md-list></md-content>'),a.put("app/chat/information/information.html",'<md-toolbar layout=row layout-align="center center">{{ICtrl.selection.name||\'User Information\'}}</md-toolbar><!--<md-content  class="reset  information" ng-if="ICtrl.selection" >--><!--<image  ng-src="{{ICtrl.selection.img }}" width="100%" height="150px" class="user-photo"></image>--><!--<div class="outer-info" ng-if="!ICtrl.selection.members">--><!--<p>Name: <span>{{ICtrl.selection.name}}</span> </p>--><!--<p>e-mail: <span>{{ICtrl.selection.email}}</span> </p>--><!--<p>status: <span>{{ICtrl.selection.status}}</span> </p>--><!--<button class="btn btn-inverse btn-lg btn-register" ng-click="ICtrl.showConfirm(\'Delete Friend\',ICtrl.deleteFriend)">--><!--Erase Friend--><!--</button>--><!--</div>--><md-card ng-if=!ICtrl.selection><img ng-src={{ICtrl.user.img}} class=md-card-image alt="Washed Out"><md-card-header><md-card-avatar><img class=md-user-avatar ng-src={{ICtrl.user.img}}></md-card-avatar><md-card-header-text><span class=md-title>{{ICtrl.user.name}}</span> <span class=md-subhead>{{ICtrl.user.email}}</span> <span class=md-subhead>{{ICtrl.user.status}}</span></md-card-header-text></md-card-header><md-card-actions layout=row layout-align="end center"><md-button ng-if="ICtrl.selection.kind!=\'group\'"><md-icon ui-sref=settings>settings</md-icon></md-button></md-card-actions></md-card><md-toolbar ng-if=ICtrl.selection class=md-accent layout=row layout-align="center center">Room</md-toolbar><md-card ng-if=ICtrl.selection style=height:110px><!--<img  ng-src="/assets/images/config.715be196.jpg"  class="md-card-image" alt="Washed Out">--><md-card-header><md-card-avatar><img class=md-user-avatar ng-src={{ICtrl.selection.img}}></md-card-avatar><md-card-header-text><span class=md-title>{{ICtrl.selection.name}}</span> <span class=md-subhead>{{ICtrl.selection.email}}</span> <span class=md-subhead>{{ICtrl.selection.status}}</span></md-card-header-text></md-card-header><md-card-actions layout=row layout-align="end center"><md-button ng-if="ICtrl.selection.kind!=\'group\'" ng-click="ICtrl.showConfirm(\'Delete Friend\',ICtrl.deleteFriend)">Erase Friend</md-button></md-card-actions></md-card><!--</md-content>--><md-toolbar class=md-accent layout=row layout-align="center center" ng-if="ICtrl.selection.kind==\'group\'">Team Members</md-toolbar><md-content ng-if="ICtrl.selection.kind==\'group\'"><md-content layout=column><md-card ng-repeat="member in ICtrl.selection.members"><md-card-header><md-card-avatar><img class=md-user-avatar ng-src={{member.img}}></md-card-avatar><md-card-header-text><span class=md-title>{{member.name}}</span> <span class=md-subhead>{{member.email}}</span> <span class=md-subhead>{{member.status}}</span></md-card-header-text><ng-md-icon ng-if="ICtrl.selection.admin==member._id" class=float-right icon=person></ng-md-icon></md-card-header><md-card-actions layout=row layout-align="end center"><md-button ng-if="ICtrl.selection.admin==ICtrl.user._id" ng-click="ICtrl.showConfirm(\'Kick From group\',ICtrl.deleteFriendFromGroup,member._id,ICtrl.selection.name)">Erase Friend</md-button></md-card-actions></md-card></md-content></md-content><md-content style="min-height: 150px" class=information ng-if="ICtrl.selection.kind==\'group\'" layout=column><md-button class=md-primary ng-click=ICtrl.showDialog() ng-if="ICtrl.selection.admin==ICtrl.user._id">Add Friend</md-button><md-button class=md-accent ng-click="ICtrl.showConfirm(\'Delete Group\',ICtrl.deleteGroup)" ng-if="ICtrl.selection.admin==ICtrl.user._id">Delete Group</md-button><md-button class=md-warn ng-click="ICtrl.showConfirm(\'Exit Group\',ICtrl.exitGroup,ICtrl.selection.name)">Exit</md-button></md-content><!--<md-content  flex class="welcome-message" ng-if="!ICtrl.selection">--><!--</md-content>-->'),a.put("app/chat/messages/messages.html",'<md-toolbar layout=row layout-align="center center" md-whiteframe=12><span layout-margin=3px></span><md-icon aria-label=Dashboard ng-hide="MessCtrl.selection==null" ng-click=MessCtrl.selectionNull()>keyboard_backspace<md-tooltip>Go Back</md-tooltip></md-icon><md-icon aria-label="Add User" hide-gt-xs ng-click=MessCtrl.toggleContacts()>contacts</md-icon><span layout-margin=3px></span> <span flex>Dashboard</span><md-icon ng-class="{\'md-primary\':MessCtrl.requests.length==0,\'alert\':MessCtrl.requests.length>0}" ng-click=MessCtrl.selectionNull()>flag<md-tooltip>{{MessCtrl.requests.length}} New Requests</md-tooltip></md-icon><md-button aria-label=settings class=md-icon-button ng-show=MessCtrl.isLoggedIn() ui-sref-active=active ui-sref=settings><ng-md-icon icon=settings></ng-md-icon></md-button><md-button aria-label=logout class=md-icon-button ng-show=MessCtrl.isLoggedIn() ui-sref-active=active ui-sref=logout><ng-md-icon icon=logout></ng-md-icon></md-button><ng-md-icon icon=info class=floater-right hide-gt-sm ng-click=MessCtrl.toggleInfo()></ng-md-icon><span layout-margin=3px></span></md-toolbar><div ng-if="MessCtrl.selection!=null"><md-toolbar layout=column flex class=md-accent><div flex layout=row layout-align="center center"><span layout-margin=3px></span><image ng-src="{{MessCtrl.selection.img }}" class=user-photo-message></image><h4 flex layout=row layout-align=end>{{MessCtrl.selection.name}}</h4><span layout-margin=3px></span></div><div flex layout=row layout-align="top end" style=height:40px><span flex style=min-width:80px></span><h6>{{MessCtrl.membersNames}}</h6><span layout-margin=2px></span></div></md-toolbar></div><repeat-messages ng-if="MessCtrl.selection!=null" messages=MessCtrl.messages user-id=MessCtrl.currentUser._id group=MessCtrl.selection.kind scroll-fn=MessCtrl.Messages.getNextPackage(MessCtrl.roomId)></repeat-messages><md-content flex layout=column ng-if="MessCtrl.selection==null"><dashboard></dashboard></md-content><div ng-if="MessCtrl.selection!=null"><md-divider></md-divider><md-tabs md-dynamic-height md-border-bottom><md-tab><md-tab-label><ng-md-icon icon=keyboard></ng-md-icon></md-tab-label><md-tab-body><md-content class=md-padding><div class=input><form ng-submit=MessCtrl.addMessage()><input ng-model=MessCtrl.sendText><md-button aria-label=send type=submit>SEND</md-button></form></div></md-content></md-tab-body></md-tab><md-tab><md-tab-label><ng-md-icon icon=edit></ng-md-icon></md-tab-label><md-tab-body><div><canvas-drawing send-canvas=MessCtrl.sendCanvas></canvas-drawing></div></md-tab-body></md-tab></md-tabs></div>'),a.put("app/chat/pendings/pendings.html",'<md-content ng-if=vm.pendings.length><md-list><md-list-item ng-repeat="person in vm.pendings"><img alt="{{person.name }}" ng-src="{{ person.img }}" class="md-avatar"><p>{{person.name}}</p><ng-md-icon icon=query_builder aria-label="Accept Friend" ng-class=""></ng-md-icon></md-list-item></md-list></md-content><md-content ng-if=!vm.pendings.length>All your request are already accepted</md-content>'),a.put("app/chat/request/request.html",'<md-content ng-if=vm.requests.length><md-list><md-list-item ng-repeat="person in vm.requests"><img alt="{{person.name }}" ng-src="{{ person.img }}" class="md-avatar"><p>{{person.name}}</p><md-icon ng-click=vm.acceptFriend(person._id) aria-label="Accept Friend">done</md-icon><md-icon ng-click=vm.rejectFriend(person._id) aria-label="Reject Friend">cancel</md-icon></md-list-item></md-list></md-content><md-content ng-if=!vm.requests.length>There are no pending friend\'s requests</md-content>'),a.put("app/main/main.html",'<div><h1 id=main-title><span>The Cha-Chat</span><br><md-button ui-sref=login><md-icon class=md-primary aria-label=login>person</md-icon><md-tooltip>Log In</md-tooltip></md-button><md-button ui-sref=signup><md-icon class=md-primary aria-label=login>person_add</md-icon><md-tooltip>Sign up</md-tooltip></md-button><!--<a ui-sref="login"><ng-md-icon icon="perm_identity"></ng-md-icon></a>--><!--<a ui-sref="signup"><ng-md-icon icon="person_add"></ng-md-icon></a>--></h1></div>'),a.put("components/addUsersToGroup/addUsersToGroup.html",'<md-dialog aria-label="List dialog"><md-toolbar><div class=md-toolbar-tools><h2>Choose Friend to be Added</h2><span flex></span></div></md-toolbar><md-dialog-content class="md-padding autocomplete"><md-contact-chips ng-model=u2gCtrl.contacts md-contacts=u2gCtrl.querySearch($query) md-contact-name=name md-contact-image=img md-contact-email=email md-require-match=true md-highlight-flags=i filter-selected=u2gCtrl.filterSelected placeholder=To></md-contact-chips></md-dialog-content><md-dialog-actions><md-button ng-click=u2gCtrl.addFriendToGroup() class=md-secondary>Add Friend</md-button><md-button ng-click=u2gCtrl.closeDialog() class=md-primary>Close Dialog</md-button></md-dialog-actions></md-dialog>'),a.put("components/canvasDrawing/canvasDrawing.html",'<div layout=row><canvas flex=90 width=800 height=200 id=canvas></canvas><div layout=column><color-picker color=color options=options on-color-changed="colorChanged(newColor, oldColor)"></color-picker><md-menu><md-button class=md-icon-button aria-label="Open demo menu" ng-click=$mdOpenMenu($event)><ng-md-icon class=floater-right icon=brush></ng-md-icon></md-button><md-menu-content width=1.5><md-menu-item ng-repeat="item in [\'20\',\'40\',\'60\']"><md-button ng-click=changeWidth(item)><p style="font-size:{{item}}px;letter-spacing: -5px">---</p></md-button></md-menu-item></md-menu-content></md-menu><md-button class=md-icon-button ng-click=clear()><ng-md-icon class=floater-right icon=delete><md-tooltip md-direction=left>CLEAR</md-tooltip></ng-md-icon></md-button><md-button class=md-icon-button ng-click=send()><ng-md-icon class=floater-right icon=send><md-tooltip md-direction=left>SEND</md-tooltip></ng-md-icon></md-button></div></div>'),a.put("components/colorPicker/colorPicker.html","<div class=color-picker><md-button class=md-icon-button ng-click=showPalette()><ng-md-icon icon=color_lens></ng-md-icon></md-button><div class=color-palette ng-if=clickVar><div ng-repeat=\"option in options\" ng-style=\"{'background-color': option}\" ng-class=\"{'palette-selected-color': option == color, 'transparent-color': option == 'transparent'}\" ng-click=changeColor(option)></div></div></div>"),a.put("components/dashboard/dashboard.html",'<div flex layout=column><md-card flex layout=column><md-content flex><md-toolbar layout=row layout-align="center center"><h3>Welcome to the cha-chat ...</h3></md-toolbar><md-content class=md-padding flex layout-gt-md=row layout=column><div flex><md-card><md-toolbar layout=row class=md-accent layout-align="center center"><span layout-margin=3px></span><md-icon aria-label=request class=md-primary>watch_later</md-icon><p flex layout=row layout-align=center>Request from Friend</p></md-toolbar><md-card-content layout=row flex><md-content flex layout=column ui-view=request></md-content></md-card-content></md-card><md-card><md-toolbar layout=row class=md-accent layout-align="center center"><span layout-margin=3px></span><md-icon aria-label=person_add>person_add</md-icon><p flex layout=row layout-align=center>Add a new Friend</p></md-toolbar><md-card-content layout=row flex><md-content flex layout=column ui-view=addContact></md-content></md-card-content></md-card></div><div flex layout=column><md-card layout=column><md-toolbar layout=row class=md-accent layout-align="center center"><span layout-margin=3px></span><md-icon aria-label=group_add>group_add</md-icon><p flex layout=row layout-align=center>Create a group</p></md-toolbar><md-card-content layout=row flex><md-content flex layout=column ui-view=addGroup></md-content></md-card-content></md-card><md-card hide show-xs><md-toolbar layout=row class=md-accent layout-align="center center"><span layout-margin=3px></span><md-icon aria-label="open conversation">contacts</md-icon><p flex layout=row layout-align=center>Open a new conversation</p></md-toolbar><md-card-actions layout=row layout-align="end center"><md-button ng-click=openContact()>Open Contacts</md-button></md-card-actions></md-card><md-card><md-toolbar layout=row class=md-accent layout-align="center center"><span layout-margin=3px></span><md-icon aria-label=pending class=md-primary>schedule</md-icon><p flex layout=row layout-align=center>Request to Friend</p></md-toolbar><md-card-content layout=row flex><md-content flex layout=column ui-view=pending></md-content></md-card-content></md-card></div></md-content></md-content></md-card></div>'),
a.put("components/footer/footer.html",'<div class=container><p>Angular Fullstack v3.2.0 | <a href=https://twitter.com/tyhenkel>@tyhenkel</a> | <a href="https://github.com/DaftMonk/generator-angular-fullstack/issues?state=open">Issues</a></p></div>'),a.put("components/loadDrawing/loadDrawing.html","<canvas width=800 height=200 id=canvas ctx-draw=imageObj></canvas>"),a.put("components/navbar/navbar.html",'<!--<div class="navbar navbar-default navbar-static-top" ng-controller="NavbarController">\n  <div class="container">\n    <div class="navbar-header">\n      <button class="navbar-toggle" type="button" ng-click="nav.isCollapsed = !nav.isCollapsed">\n        <span class="sr-only">Toggle navigation</span>\n        <span class="icon-bar"></span>\n        <span class="icon-bar"></span>\n        <span class="icon-bar"></span>\n      </button>\n      <md-fab-toolbar md-open="true" count="0"\n                      md-direction="left">\n        <md-fab-trigger class="align-with-text">\n          <md-button aria-label="menu" class="md-fab md-primary">\n            <span class="icon-bar"></span>\n            <span class="icon-bar"></span>\n            <span class="icon-bar"></span>\n          </md-button>\n        </md-fab-trigger>\n        <md-toolbar>\n          <md-fab-actions class="md-toolbar-tools">\n            <md-button aria-label="comment" class="md-icon-button">\n\n            </md-button>\n            <md-button aria-label="label" class="md-icon-button">\n\n            </md-button>\n            <md-button aria-label="photo" class="md-icon-button">\n\n            </md-button>\n          </md-fab-actions>\n        </md-toolbar>\n      </md-fab-toolbar>\n\n      <a href="/" class="navbar-brand">chat-yeo</a>\n    </div>\n    <div collapse="nav.isCollapsed" class="navbar-collapse collapse" id="navbar-main">\n      <ul class="nav navbar-nav">\n        <li ng-repeat="item in nav.menu" ui-sref-active="active">\n            <a ui-sref="{{item.state}}">{{item.title}}</a>\n        </li>\n        <li ng-show="nav.isAdmin()" ui-sref-active="active"><a ui-sref="admin">Admin</a></li>\n      </ul>\n\n      <ul class="nav navbar-nav navbar-right">\n        <li ng-hide="nav.isLoggedIn()" ui-sref-active="active"><a ui-sref="signup">Sign up</a></li>\n        <li ng-hide="nav.isLoggedIn()" ui-sref-active="active"><a ui-sref="login">Login</a></li>\n        <li ng-show="nav.isLoggedIn()"><p class="navbar-text">Hello {{ nav.getCurrentUser().name }}</p> </li>\n        <li ng-show="nav.isLoggedIn()" ui-sref-active="active"><a ui-sref="settings"><span class="glyphicon glyphicon-cog"></span></a></li>\n        <li ng-show="nav.isLoggedIn()"><a ui-sref="logout">Logout</a></li>\n      </ul>\n    </div>\n  </div>\n</div>\n--><!--<md-toolbar>\n    <div layout="row" flex="" layout-align="left" layout-wrap>\n      The Chat\n    </div>\n    <div layout="row" flex="" layout-align="center center" layout-wrap>\n      <md-button aria-label="settings" class="md-icon-button" ng-show="nav.isLoggedIn()" ui-sref-active="active" ui-sref="settings"><ng-md-icon icon="settings"></ng-md-icon>\n      </md-button>\n      <md-button aria-label="logout" class="md-icon-button" ng-show="nav.isLoggedIn()" ui-sref-active="active" ui-sref="logout"><ng-md-icon icon="logout"></ng-md-icon>\n      </md-button>\n    </div>\n  </md-toolbar>\n</div>--><md-toolbar md-whiteframe=6><div layout=row layout-align="center center"><div>The Cha-Chat</div><div layout=row flex layout-align=center>{{nav.currentUser.name}}</div><div><md-button aria-label=settings class=md-icon-button ng-show=nav.isLoggedIn() ui-sref-active=active ui-sref=settings><ng-md-icon icon=settings></ng-md-icon></md-button><md-button aria-label=logout class=md-icon-button ng-show=nav.isLoggedIn() ui-sref-active=active ui-sref=logout><ng-md-icon icon=logout></ng-md-icon></md-button></div></div></md-toolbar>'),a.put("components/oauth-buttons/oauth-buttons.html",'<a ng-class=classes ng-click="OauthButtons.loginOauth(\'facebook\')" class="btn btn-facebook"><ng-md-icon icon=facebook></ng-md-icon></a> <a ng-class=classes ng-click="OauthButtons.loginOauth(\'twitter\')" class="btn btn-twitter"><ng-md-icon icon=twitter></ng-md-icon></a>'),a.put("components/repeatMessages/repeatMessages.html",'<md-content flex class="chat-message messages" scroll-top=scrollFn()><div ng-repeat="item in messages" ng-class=fromOrTo(item.origin)><p ng-if="group==\'group\'">{{item.name}}:</p><span ng-if=!item.scribble>{{item.text}}</span> <span ng-if=item.scribble><img style=background:black src={{item.text}} load-drawing="" width=200></span></div></md-content>')}]);